<!DOCTYPE html>
<html>
<body>
<link rel="stylesheet" type="text/css" src="iso_style.css" />
<script type="text/javascript" src="d3.v3.min.js"></script>
<script type="text/javascript" src="jquery-1.8.2.js"></script>
<script type="text/javascript" src="draw_position.js"></script>
<script type="text/javascript" src="structures.js"></script>
<script type="text/javascript">
	var width = 500;
	var height = 500;
	
//	var edge = [{"from":"a","to":"b"}];
	
	$(document).ready(function(){
		height = $(window).height()-20;
		width = $(window).width()-20;
		//alert("in");
		var svg = d3.select("svg").attr("width", width).attr("height", height).append("g");
	
		for(i=0; i<10; i++){
			var v = new Vertex(i+"");
			for(j=1; j<10; j++){
				v.edges.push(new Edge(i+"", ((i+j) % 10)+"", 0));
			}
			graph.push(v);
		}
		
		svg.selectAll("circle").data(graph).enter().append("g").attr("id",function(d){return "v"+d.name}).each(function(d,i){
			////Make vertices
			var ind = i;
			d3.select(this).append("circle")
			.attr("cx", function(d){
			return completeGraphPosition( 2*Math.PI*(ind/graph.length) )[0];})
			.attr("cy", function(d){
			return completeGraphPosition( 2*Math.PI*(ind/graph.length) )[1];})
			.attr("r", 10).attr("fill", "steelblue");
			////Make labels for those vertices. Pretty lame right now.
			d3.select(this).append("text")
			.attr("x", function(d){
			return completeGraphPosition( 2*Math.PI*(ind/graph.length) )[0]-4;})
			.attr("y", function(d){
			return completeGraphPosition( 2*Math.PI*(ind/graph.length) )[1]+5;})
			.text(function(d){return d.name;});
		});
		
		d3.select('#v2').attr("transform", "translate(-330,-310)");
		
		for(i=0; i<graph.length; i++){
			var vert = graph[i];
			console.log(vert);
			var enEdge = svg.selectAll("line .e"+vert.name)
			.data(vert.edges)
			.enter();
			
			enEdge.append("line").each(calculateEdge);
		}
		
		// var enEdge = svg.selectAll("line").data(edge).enter();
		
		// enEdge.append("line")
		////Use id selection to get positions of vertices --> set appropriate SVG traits
		// .attr("x1", function(d){return svg.select("#"+d.from).attr("cx")})
		// .attr("y1", function(d){return svg.select("#"+d.from).attr("cy")})
		// .attr("x2", function(d){return svg.select("#"+d.to).attr("cx")})
		// .attr("y2", function(d){return svg.select("#"+d.to).attr("cy")})
		// .attr("stroke", "black");
	});
</script>
<svg></svg>
</body>
</html>